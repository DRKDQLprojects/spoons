(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{7337:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pe}});var r=n(5893),a=n(4942),i=n(1040),s=n(7294),c=n(6590),l=n(1163),o=n(7820),d=n(8191),u=n.n(d),h=n(6640),p=n(4148),m=n(4855),f=n(2042),x=n(5912),g=n.n(x),j=n(7454),y=n(1334),_=n(8819),v=n(1905),b=n.n(v),S=function(e){return(0,r.jsxs)("div",{className:e.disabled?b().disabled:b().radio,children:[(0,r.jsx)("input",{type:"radio",id:e.id,name:e.id,checked:e.checked,disabled:e.disabled,onChange:e.onChange}),(0,r.jsx)("label",{htmlFor:e.id,children:e.label})]})},C=n(2226),w=n.n(C),P=function(e){return(0,r.jsxs)("div",{className:e.center?w().centered:w().normal,children:[" ",e.children," "]})},Z=n(7478),N=n(6406),O=n(5018),E=n(5633);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.lobby.id,n=e.lobby.gameStatus,a=e.lobby.settings,i=e.lobby.players,c=e.myPlayer,l=(0,s.useState)(-1),d=l[0],h=l[1],p=(0,s.useState)(!1),x=p[0],v=p[1],b=(0,s.useState)(-1),C=b[0],w=b[1],k=(0,s.useState)("1"),I=k[0],T=k[1],M=function(e,n){o.Z.database().ref("".concat(t,"/settings/dealer")).set({on:e,default:!e||n})},A=function(e){M(!0,e)},W=function(e){o.Z.database().ref("".concat(t,"/settings/shuffle")).set(e)},D=function(e){o.Z.database().ref("".concat(t,"/settings/peek/on")).set(e)},R=function(e){o.Z.database().ref("".concat(t,"/players/").concat(c.id)).set(L(L({},c),{},{id:"",avatar:e}))};u()((function(){d>0?h(d-1):(h(-1),v(!1))}),x?1e3:null);(0,s.useEffect)((function(){return w(window.screen.width),window.addEventListener("resize",F),function(){return window.removeEventListener("resize",F)}}),[]);var F=function(){var e=window.screen.height,t=window.screen.width;T("".concat(850<t&&t<1100?t/1100:1,", ").concat(e<715?e/715:1)),w(window.screen.width)};return(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)(j.Z,{size:75})}),(0,r.jsxs)(Z.Z,{container:!0,direction:C>850?"row":"column",justifyContent:"center",alignItems:"center",style:{transform:"scale(".concat(I,")"),transformOrigin:"top"},children:[(0,r.jsxs)("div",{className:C>850?g().gridItem:g().mobileGridItem,children:[(0,r.jsx)(y.Z,{center:!0,fullWidth:!0,children:(0,r.jsxs)("h1",{children:[" Lobby ","".concat(i.length,"/10")," "]})}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:g().scrollablePlayers,children:function(){var n=[];n.push((0,r.jsx)("div",{className:g().myPlayer,children:(0,r.jsxs)(y.Z,{column:!0,center:!0,noWrap:!0,children:[(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)(O.Z,{number:c.avatar,size:50,onPrevious:function(){R(0===c.avatar?9:c.avatar-1)},onNext:function(){return R((c.avatar+1)%10)}})}),(0,r.jsxs)(y.Z,{center:!0,noWrap:!0,children:[(0,r.jsxs)("h3",{style:{margin:"5px"},children:[" ",c.nickname," "]}),(0,r.jsxs)("h2",{children:[" ",c.isHost&&"\ud83e\udd34"," "]})]})]})},"lobby-".concat(c.id))),i.filter((function(e){return e.id!==c.id})).forEach((function(a){n.push((0,r.jsxs)("div",{className:g().player,children:[(0,r.jsxs)(y.Z,{column:!0,noWrap:!0,children:[(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)(E.Z,{number:a.avatar,size:45})}),(0,r.jsxs)(y.Z,{center:!0,noWrap:!0,children:[(0,r.jsxs)("h3",{style:{margin:"5px"},children:[" ",a.nickname," "]}),(0,r.jsxs)("h2",{children:[" ",a.isHost&&"\ud83e\udd34"," "]})]})]}),c.isHost&&(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)(_.Z,{onClick:function(){return e.removePlayer(t,a.id)},danger:!0,disabled:!1,children:"Kick"})})]},"lobby-".concat(a.id)))}));for(var a=0;a<10-i.length;a++)n.push((0,r.jsx)("div",{className:g().emptyPlayer,children:(0,r.jsxs)(y.Z,{column:!0,center:!0,noWrap:!0,children:[(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)(E.Z,{size:45,number:-1})}),(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)("p",{children:" Empty "})})]})},"lobby-empty-player-".concat(a)));return n}()})]}),C>850&&(0,r.jsx)("div",{style:{width:"20px"}}),(0,r.jsxs)("div",{className:g().gridItem,children:[(0,r.jsx)(y.Z,{center:!0,stretch:!0,children:(0,r.jsx)("h1",{children:" Settings "})}),(0,r.jsxs)(y.Z,{column:!0,spaceBetween:!0,noWrap:!0,children:[(0,r.jsxs)("div",{className:g().scrollableSettings,children:[(0,r.jsxs)(P,{children:[(0,r.jsx)("h3",{children:" PLAYER POSITIONS "}),(0,r.jsx)("br",{}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(S,{id:"shuffle-off",label:"LOBBY",checked:!a.shuffle,disabled:!c.isHost,onChange:function(){return W(!1)}}),(0,r.jsx)(S,{id:"shuffle-on",label:"SHUFFLE",checked:a.shuffle,disabled:!c.isHost,onChange:function(){return W(!0)}})]})]}),(0,r.jsxs)(P,{children:[(0,r.jsx)("h3",{children:" DEALER "}),(0,r.jsx)("br",{}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(S,{id:"dealer-random",label:"RANDOM",checked:a.dealer.on&&a.dealer.default,disabled:!c.isHost,onChange:function(){return A(!0)}}),(0,r.jsx)(S,{id:"dealer-winner",label:"WINNER",checked:a.dealer.on&&!a.dealer.default,disabled:!c.isHost,onChange:function(){return A(!1)}}),(0,r.jsx)(S,{id:"dealer-off",label:"OFF",checked:!a.dealer.on,disabled:!c.isHost,onChange:function(){return M(!1,!0)}})]})]}),(0,r.jsxs)(P,{children:[(0,r.jsx)("h3",{children:" PEEKING "}),(0,r.jsx)("br",{}),(0,r.jsxs)(y.Z,{children:[(0,r.jsx)(S,{id:"peeking-on",label:"ON",checked:a.peek.on,disabled:!c.isHost,onChange:function(){return D(!0)}}),(0,r.jsx)(S,{id:"peeking-off",label:"OFF",checked:!a.peek.on,disabled:!c.isHost,onChange:function(){return D(!1)}})]}),a.peek.on&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{children:" Timer "}),(0,r.jsx)(y.Z,{children:[2,3,4,5].map((function(e){return(0,r.jsx)(S,{id:"peek-timer-".concat(e),label:"".concat(e,"s"),checked:e===a.peek.timer,onChange:function(){return n=e,void o.Z.database().ref("".concat(t,"/settings/peek/timer")).set(n);var n},disabled:!c.isHost},"peek-timer-".concat(e))}))}),(0,r.jsx)("h4",{children:" Cooldown "}),(0,r.jsx)(y.Z,{children:[2,3,4,5].map((function(e){return(0,r.jsx)(S,{id:"peek-cooldown-".concat(e),label:"".concat(e,"s"),checked:e===a.peek.cooldown,onChange:function(){return n=e,void o.Z.database().ref("".concat(t,"/settings/peek/cooldown")).set(n);var n},disabled:!c.isHost},"peek-cooldown-".concat(e))}))})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)("h3",{children:" CLICKS TO COLLECT "}),(0,r.jsx)("br",{}),(0,r.jsx)(y.Z,{children:[1,2,3,4,5,6,7].map((function(e){return(0,r.jsx)(S,{id:"clicks-to-collect-".concat(e),label:"".concat(e),checked:e===a.clicksToCollect,onChange:function(){return n=e,void o.Z.database().ref("".concat(t,"/settings/clicksToCollect")).set(n);var n},disabled:!c.isHost},"clicks-to-collect-".concat(e))}))})]}),(0,r.jsxs)(y.Z,{noWrap:!0,children:[(0,r.jsx)(m.CopyToClipboard,{text:"".concat("https://drkdql.com/spoons","/join?code=").concat(t),onCopy:function(){},children:(0,r.jsx)("div",{className:g().buttonPadding,children:(0,r.jsx)(_.Z,{primary:!0,disabled:!1,onClick:function(){h(2),v(!0)},children:x?"COPIED!":"INVITE"})})}),(0,r.jsxs)("div",{className:g().buttonPadding,children:[c.isHost&&(0,r.jsxs)(_.Z,{success:!0,disabled:!c.isHost||1===i.length,onClick:function(){return function(){for(var e=(0,f.Ql)(i,a,n.round),r=Object.keys(e).length-1,s=r,c=[],l=0;l<s;l++)c.push(!1);o.Z.database().ref(t).set({gameStatus:L(L({},n),{},{numRounds:r,countdownStarted:!0,spoonStatuses:c}),players:e,settings:L({},a)})}()},children:[i.length>1&&"Start",1===i.length&&"Waiting for players..."]}),!c.isHost&&(0,r.jsx)(y.Z,{column:!0,center:!0,children:(0,r.jsx)("h2",{style:{marginTop:"10px"},children:"Waiting for host..."})})]})]})]})]})]})]})},T=n(5242),M=n.n(T),A=function(e){return(0,r.jsx)(N.Z,{children:(0,r.jsxs)("h1",{className:M().text,children:[" ",e.seconds," "]})})},W=n(8495),D=n.n(W),R=n(7819),F=n(7372),B=n.n(F),G=function(e){return(0,r.jsxs)("div",{className:B().grid,style:{gridTemplateColumns:e.gridTemplateColumns,gridTemplateRows:e.gridTemplateRows},children:[" ",e.children," "]})},H=function(e){return(0,r.jsxs)("svg",{width:e.width,height:e.height,viewBox:"0 0 247 357",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("g",{filter:"url(#filter0_ii)",children:(0,r.jsx)("path",{d:"M157.814 48.9212C184.314 11.9224 207.562 12.6635 216.02 17.7926C224.692 22.5532 236.957 42.3158 218.166 83.7652C206.385 109.751 192.64 122.4 181.416 128.598C171.536 134.054 163.618 134.505 160.764 134.667C160.377 134.689 160.083 134.706 159.89 134.729C158.375 134.945 154.459 136.857 151.293 142.861L51.5575 326.653L51.3537 327.029C49.2233 330.959 47.0341 334.997 43.5022 337.723C41.7957 339.04 39.9769 339.925 38.1037 340.083C35.1949 340.328 32.7656 339.656 30.8132 338.581C28.9063 337.428 27.1091 335.66 25.8673 333.018C25.0676 331.317 24.9248 329.299 25.212 327.163C25.8065 322.741 28.2091 318.826 30.5471 315.017L30.7707 314.652L140.071 136.382C143.688 130.639 143.387 126.291 142.816 124.871C142.739 124.693 142.607 124.43 142.433 124.084L142.432 124.084C141.146 121.531 137.577 114.448 137.363 103.163C137.119 90.3446 141.2 72.1167 157.814 48.9212Z",fill:"url(#paint0_linear)"})}),(0,r.jsx)("path",{d:"M161.133 141.157L161.133 141.157C161.107 141.158 161.082 141.16 161.059 141.161C160.905 141.244 160.639 141.405 160.28 141.693C159.454 142.356 158.239 143.625 157.043 145.893L157.025 145.927L157.007 145.961L57.2714 329.752L57.2706 329.754L57.068 330.127C56.9965 330.259 56.924 330.393 56.8504 330.529C54.868 334.193 52.1096 339.291 47.4733 342.869C45.1804 344.638 42.1948 346.261 38.6503 346.56C34.3701 346.921 30.6685 345.921 27.6788 344.275L27.5625 344.211L27.4489 344.143C24.5289 342.376 21.812 339.671 19.9847 335.783C18.4715 332.564 18.384 329.167 18.77 326.297C19.5503 320.493 22.5861 315.555 24.7679 312.006C24.8487 311.875 24.9283 311.745 25.0066 311.618L161.133 141.157ZM161.133 141.157C164.398 140.971 173.442 140.427 184.559 134.288C197.201 127.306 211.825 113.493 224.086 86.4491C243.404 43.8389 232.332 19.4466 219.271 12.1625C206.432 4.49358 179.772 7.10129 152.53 45.1363C135.239 69.2761 130.589 88.8477 130.864 103.287C131.105 115.984 135.156 124.088 136.628 127.009L136.628 127.009L161.133 141.157ZM25.2293 311.255L25.0071 311.617L136.628 127.01C136.64 127.032 136.651 127.054 136.661 127.075C136.666 127.25 136.66 127.561 136.59 128.016C136.429 129.063 135.937 130.75 134.571 132.918L134.55 132.951L134.53 132.985L25.2303 311.253L25.2293 311.255Z",stroke:"#373737",strokeWidth:"13"}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"filter0_ii",x:"12.0762",y:"2.13095",width:"228.898",height:"351.003",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dx:"23"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dx:"-11",dy:"-13"}),(0,r.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),(0,r.jsx)("feBlend",{mode:"normal",in2:"effect1_innerShadow",result:"effect2_innerShadow"})]}),(0,r.jsxs)("linearGradient",{id:"paint0_linear",x1:"86",y1:"171",x2:"134",y2:"217",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#A9A9A9"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#DFDFDF"})]})]})]})},z=n(3770),K=n.n(z),q=function(e){var t=e.peekTimerOn,n=e.myPlayer,a=e.spectating,i=e.roundComplete,s=e.seconds,c=e.currentRound,l=e.numRounds,o=e.currentMyPlayer,d=e.currentPlayers,u=e.peekCooldownOn,h=e.spoonStatuses,p=e.width,m=e.peekingOn,f=e.clicksToCollect,x=75,g=50,j=10;p<=850&&(x=50,g=35,j=7);var v,b,S,C=function(){return h.map((function(t,s){if("boolean"===typeof t)return t?(0,r.jsx)(y.Z,{column:!0,children:(0,r.jsx)("div",{style:{height:x,width:g}})},"spoon-".concat(s)):(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)("button",{onClick:function(t){return e.collectSpoon(s)},className:K().spoon,disabled:!w(s)||i||a,children:(0,r.jsx)(H,{height:x,width:g})}),(0,r.jsx)(y.Z,{})]},"spoon-".concat(s));var c=[];return t.forEach((function(e){e!==n.id&&0===c.filter((function(t){return t===e})).length&&c.push(e)})),(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)(y.Z,{column:!0,children:c.map((function(e){return(0,r.jsx)(y.Z,{children:t.map((function(t){if(t===e){var n=d.filter((function(e){return e.id===t}))[0];return(0,r.jsx)(E.Z,{number:n.avatar,size:j})}return null}))},"spoon-battle-indicator-opponent-".concat(e))}))}),(0,r.jsx)("button",{onClick:function(t){return e.collectSpoon(s)},className:K().spoon,disabled:!w(s)||i||a,children:(0,r.jsx)(H,{height:x,width:g})}),(0,r.jsx)(y.Z,{children:t.map((function(e){return e===n.id?(0,r.jsx)(E.Z,{number:n.avatar,size:j}):null}))})]},"spoon-".concat(s))}))},w=function(t){if(t&&c===l&&"boolean"!==typeof h[t]&&!e.fourOfAKind())return!0;var r=d.filter((function(e){return e.gameState.spoonCollected})).length>=1;return!n.gameState.spoonCollected&&(r||e.fourOfAKind())};i&&d.filter((function(e){return e.gameState.roundWinner})).length>0&&d.filter((function(e){return e.gameState.toBeEliminated})).length>0&&(v=d.filter((function(e){return e.gameState.roundWinner}))[0].nickname,b=d.filter((function(e){return e.gameState.toBeEliminated}))[0].nickname,c===l-1&&(S=d.filter((function(e){return e.gameState.remaining&&!e.gameState.toBeEliminated}))));return(0,r.jsx)("div",{style:{minHeight:"".concat(x+85,"px"),width:"100%",height:"".concat(d.filter((function(e){return e.gameState.remaining})).length-1<3?x+85:p>850?215:160,"px")},children:(0,r.jsxs)(y.Z,{column:!0,center:1===f,stretch:!0,noWrap:!0,children:[!i&&(0,r.jsxs)(r.Fragment,{children:[(t||n.gameState.spoonCollected||a||!m)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{height:"60px"},children:[!(n.gameState.spoonCollected||a||!m)&&(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsxs)("h2",{style:{marginBottom:"10px"},children:["Timer: ",s]})}),e.fourOfAKind()&&!w(null)&&(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)("h2",{className:K().collectIndicator,style:{textAlign:"center"},children:" COLLECT NOW! "})})]}),(0,r.jsx)("div",{style:{height:"85px"},children:(0,r.jsx)(y.Z,{spaceEvenly:!0,noWrap:p>850,children:C()})})]}),!(t||n.gameState.spoonCollected||a||!m)&&(0,r.jsxs)(r.Fragment,{children:[c===l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{height:"60px"},children:(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsxs)("h2",{className:K().collectIndicator,style:{textAlign:"center"},children:[" ",e.fourOfAKind()&&"COLLECT NOW!"," "]})})}),(0,r.jsx)("div",{style:{height:"85px"},children:(0,r.jsx)(y.Z,{center:!0,children:C()})})]}),c<l&&(0,r.jsxs)(r.Fragment,{children:[e.fourOfAKind()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{height:"60px"},children:(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsx)("h2",{className:K().collectIndicator,style:{textAlign:"center"},children:" COLLECT NOW! "})})}),(0,r.jsx)("div",{style:{height:"85px"},children:(0,r.jsx)(y.Z,{spaceEvenly:!0,noWrap:p>850,children:C()})})]}),!e.fourOfAKind()&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(_.Z,{onClick:e.peek,disabled:u||a,primary:!0,stretch:!0,children:[u&&"Wait (".concat(s,")"),!u&&"Check for spoons"]})})]})]})]}),i&&(0,r.jsxs)(r.Fragment,{children:[o.isHost&&(0,r.jsxs)(r.Fragment,{children:[c===l&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[v," WINS THE GAME!"]})})}),c<l&&(0,r.jsxs)(y.Z,{center:!0,children:[c<l-1&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[" ",v," wins! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",b," is out! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",l-c+1," players remain. "]})]}),c===l-1&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[" ",S&&S[0].nickname," vs. ",S&&S[1].nickname," in the FINALE! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",b," is out! "]})]})]})]}),!o.isHost&&(0,r.jsxs)(r.Fragment,{children:[c===l&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[v," WINS THE GAME!"]}),(0,r.jsx)("h3",{style:{textAlign:"center"},children:" Waiting for host to go back to lobby... "})]}),c<l&&(0,r.jsxs)(y.Z,{center:!0,children:[c<l-1&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[" ",v," wins! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",b," is out! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",l-c+1," players remain. "]}),(0,r.jsx)("h3",{style:{textAlign:"center"},children:" Waiting for host... "})]}),c===l-1&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)("h1",{style:{textAlign:"center"},children:[" ",S&&S[0].nickname," vs. ",S&&S[1].nickname," in the FINALE! "]}),(0,r.jsxs)("h3",{style:{textAlign:"center"},children:[" ",b," is out! "]}),(0,r.jsx)("h3",{style:{textAlign:"center"},children:" Waiting for host... "})]})]})]})]})]})})},Q=n(1317),V=n.n(Q),X=function(e){var t=e.player,n=t.gameState.pile,a=t.gameState.hand,i=t.gameState.cardDrawn,s=t.gameState.roundWinner,c=t.gameState.spoonCollected,l=e.roundComplete,o=e.maxPileLength,d=e.width,u=d>850?70:50;return(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)(y.Z,{center:!0,noWrap:!0,children:(0,r.jsxs)("div",{className:l&&d<=850?c?V().safeMobile:V().eliminatedMobile:V().flex,children:[(0,r.jsx)(E.Z,{number:t.avatar,size:25}),(0,r.jsxs)("h4",{style:{marginLeft:"5px",marginTop:"5px"},children:[t.nickname,t.gameState.dealer?"\ud83e\udd35\u200d\u2642\ufe0f":"",l&&d>850&&(0,r.jsxs)("span",{className:c?V().safe:V().eliminated,children:[c&&s&&"WINNER",c&&!s&&"SAFE",!c&&"ELIMINATED"]})]})]})}),(0,r.jsx)("div",{style:{height:"5px"}}),(0,r.jsxs)(y.Z,{noWrap:!0,children:[(0,r.jsxs)("div",{className:V().pile,style:{height:"".concat(u+o,"px")},children:[0===n.length&&(0,r.jsx)("div",{className:V().pilePlaceholder}),n.length>0&&function(){var e=n.length;l&&i&&n.length;for(var a=[],s=e-1;s>=0;s--)0===s?a.push((0,r.jsx)("div",{className:V().pileCard,style:{marginTop:"".concat(e-s,"px"),boxShadow:"0px -4px 0px rgba(0, 0, 0, 0.1)"},children:!l&&"".concat(e)},"player-".concat(t.id,"-pile-card-").concat(s))):a.push((0,r.jsx)("div",{className:V().pileCard,style:{marginTop:"".concat(e-s,"px")}},"player-".concat(t.id,"-pile-card-").concat(s)));return a}()]}),(0,r.jsx)(y.Z,{children:function(){var e=a;i&&(e=a.concat([i]));var n=d>850?50:35;return e.map((function(a,c){var o=e.length-1-c;return l&&s?4===c?null:(0,r.jsxs)("div",{className:V().winnerCard,style:{color:"diamond"===a.suit||"heart"===a.suit?"red":"",marginLeft:"".concat(0===c?n/2*3.1:-n/2*3.1,"px"),marginTop:"0px"},children:[(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(a.suit)," "]}),(0,r.jsxs)("h4",{children:[" ",a.value," "]})]},"player-".concat(t.id,"-card-").concat(o)):0===o&&i?(0,r.jsx)("div",{className:V().card,style:{marginLeft:"".concat(-n,"px"),marginTop:"15px"}},"player-".concat(t.id,"-card-").concat(o)):(0,r.jsx)("div",{className:V().card,style:{marginLeft:"".concat(0===c?n/2*3:-n/2*3,"px"),marginTop:"0px"}},"player-".concat(t.id,"-card-").concat(o))}))}()})]})]})},Y=n(63),U=n.n(Y),$=function(e){var t=e.player,n=t.gameState.pile,a=t.gameState.hand,i=t.gameState.cardDrawn,s=t.gameState.roundWinner,c=t.gameState.spoonCollected,l=e.roundComplete,o=e.maxPileLength,d=e.width,u=d>850?70:50;return(0,r.jsx)(y.Z,{column:!0,noWrap:!0,children:(0,r.jsxs)("div",{style:{marginLeft:d>850?"20px":"5px",marginTop:"10px"},children:[(0,r.jsx)(y.Z,{noWrap:!0,children:(0,r.jsxs)("div",{className:l&&d<=850?c?U().safeMobile:U().eliminatedMobile:U().flex,children:[(0,r.jsx)(E.Z,{number:t.avatar,size:25}),(0,r.jsxs)("h4",{style:{marginLeft:"5px",marginTop:"5px"},children:[t.nickname,t.gameState.dealer?"\ud83e\udd35\u200d\u2642\ufe0f":"",l&&d>850&&(0,r.jsxs)("span",{className:c?U().safe:U().eliminated,children:[c&&s&&"WINNER",c&&!s&&"SAFE",!c&&"ELIMINATED"]})]})]})}),(0,r.jsx)("div",{style:{height:"5px"}}),(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)(y.Z,{column:!0,children:function(){var e=a;i&&(e=a.concat([i]));var n=d>850?50:35;return e.map((function(e,a){return l&&s?4===a?null:(0,r.jsxs)("div",{className:U().winnerCard,style:{color:"diamond"===e.suit||"heart"===e.suit?"red":"",marginTop:"".concat(0===a?0:-13,"px")},children:[(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(e.suit)," "]}),(0,r.jsxs)("h4",{children:[" ",e.value," "]})]},"player-".concat(t.id,"-card-").concat(a)):4===a?(0,r.jsx)("div",{className:U().card,style:{marginTop:"-".concat(n,"px"),marginLeft:"15px"}},"player-".concat(t.id,"-card-").concat(a)):(0,r.jsx)("div",{className:U().card,style:{marginTop:"".concat(a>0?-n/2:0,"px")}},"player-".concat(t.id,"-card-").concat(a))}))}()}),(0,r.jsxs)("div",{className:U().pile,style:{width:"".concat(u+o,"px")},children:[0===n.length&&(0,r.jsx)("div",{className:U().pilePlaceholder}),n.length>0&&function(){var e=n.length;l&&i&&n.length;for(var a=[],s=0;s<e;s++)s===e-1?a.push((0,r.jsx)("div",{className:U().pileCard,style:{marginLeft:"".concat(s,"px"),boxShadow:"-4px 0px 0px rgba(0, 0, 0, 0.1)"},children:!l&&"".concat(e)},"player-".concat(t.id,"-pile-card-").concat(s))):a.push((0,r.jsx)("div",{className:U().pileCard,style:{marginLeft:"".concat(s,"px")}},"player-".concat(t.id,"-pile-card-").concat(s)));return a}()]})]})]})})},J=n(6988),ee=n.n(J),te=function(e){var t=e.player,n=t.gameState.pile,a=t.gameState.hand,i=t.gameState.cardDrawn,s=t.gameState.roundWinner,c=t.gameState.spoonCollected,l=e.roundComplete,o=e.maxPileLength,d=e.width,u=d>850?70:50;return(0,r.jsx)(y.Z,{column:!0,noWrap:!0,children:(0,r.jsx)("div",{style:{marginRight:d>850?"20px":"5px",marginTop:"10px"},children:(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)(y.Z,{end:!0,noWrap:!0,children:(0,r.jsxs)("div",{className:l&&d<=850?c?ee().safeMobile:ee().eliminatedMobile:ee().flex,children:[(0,r.jsx)(E.Z,{number:t.avatar,size:25}),(0,r.jsxs)("h4",{style:{marginLeft:"5px",marginTop:"5px"},children:[t.nickname,t.gameState.dealer?"\ud83e\udd35\u200d\u2642\ufe0f":"",l&&d>850&&(0,r.jsxs)("span",{className:c?ee().safe:ee().eliminated,children:[c&&s&&"WINNER",c&&!s&&"SAFE",!c&&"ELIMINATED"]})]})]})}),(0,r.jsx)(y.Z,{end:!0,children:(0,r.jsxs)("div",{className:ee().pile,style:{width:"".concat(u+o,"px")},children:[0===n.length&&(0,r.jsx)("div",{className:ee().pilePlaceholder}),n.length>0&&function(){var e=n.length;l&&i&&n.length;for(var t=[],a=0;a<e;a++)a===e-1?t.push((0,r.jsx)("div",{className:ee().pileCard,style:{marginRight:"".concat(a,"px"),boxShadow:"4px 0px 0px rgba(0, 0, 0, 0.1)"},children:!l&&"".concat(e)})):t.push((0,r.jsx)("div",{className:ee().pileCard,style:{marginRight:"".concat(a,"px")}}));return t}()]})}),(0,r.jsx)(y.Z,{end:!0,children:(0,r.jsx)(y.Z,{column:!0,children:function(){var e=a;i&&(e=a.concat([i]));var n=d>850?50:35;return e.map((function(a,c){var o=e.length-c-1;return l&&s?4===c?null:(0,r.jsxs)("div",{className:ee().winnerCard,style:{color:"diamond"===a.suit||"heart"===a.suit?"red":"",marginTop:"".concat(0===c?n/2*3.2:-n/2*3.2,"px")},children:[(0,r.jsxs)("h4",{children:[" ",a.value," "]}),(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(a.suit)," "]})]},"player-".concat(t.id,"-card-").concat(o)):4===c&&i?(0,r.jsx)("div",{className:ee().card,style:{marginTop:"-".concat(n,"px"),marginLeft:"-15px"}},"player-".concat(t.id,"-card-").concat(o)):(0,r.jsx)("div",{className:ee().card,style:{marginTop:"".concat(0===c?n/2*3:-n/2*3,"px")}},"player-".concat(t.id,"-card-").concat(o))}))}()})})]})})})},ne=n(6889),re=n.n(ne),ae=function(e){var t=e.myPlayer,n=e.spectating,a=e.roundComplete,i=e.safeMessage,c=e.numOfRemainingPlayers,l=t.gameState.cardDrawn,o=t.gameState.pile.length,d=(0,s.useState)(!1),u=d[0],h=d[1],p=e.width,m=p>850?70:50,x=52-4*c;return(0,r.jsx)("div",{className:re().container,children:(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsxs)(y.Z,{center:!0,children:[n&&(0,r.jsx)("span",{children:(0,r.jsxs)("button",{className:re().spectating,onClick:e.spectateNext,children:[" ","<"]})}),(0,r.jsx)(y.Z,{center:!0,children:(0,r.jsxs)("div",{className:i&&p<=850?"ELIMINATED"===i?re().eliminatedMobile:re().safeMobile:re().flex,children:[(0,r.jsx)(E.Z,{number:t.avatar,size:30}),(0,r.jsxs)("h3",{style:{marginLeft:"5px",marginTop:"5px"},children:[n&&"SPECTATING: ".concat(t.nickname),!n&&"".concat(t.nickname),t.gameState.dealer?"\ud83e\udd35\u200d\u2642\ufe0f":"",i&&p>850&&(0,r.jsxs)("span",{className:"ELIMINATED"===i?re().eliminated:re().safe,children:[" ",i," "]})]})]})}),n&&(0,r.jsx)("span",{children:(0,r.jsxs)("button",{className:re().spectating,onClick:e.spectatePrevious,children:[" ",">"," "]})})]}),(0,r.jsx)("div",{style:{height:"5px"},children:" "}),(0,r.jsxs)(y.Z,{center:!0,noWrap:!0,children:[t.gameState.hand.map((function(t,a){return(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)("button",{className:re().card,onClick:function(){return e.discard(t)},disabled:void 0===l||n||e.fourOfAKind(),style:"diamond"===t.suit||"heart"===t.suit?{color:"red"}:{},children:(0,r.jsxs)(y.Z,{column:!0,center:!0,children:[(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(t.suit)," "]}),(0,r.jsxs)("h4",{children:[" ",t.value," "]})]})}),p>850&&(0,r.jsx)("h3",{className:re().discardText,children:" REMOVE "})]},"card-".concat(a))})),(0,r.jsxs)("div",{className:re().cardDrawn,children:[l&&(0,r.jsxs)(y.Z,{column:!0,children:[(0,r.jsx)("button",{className:re().card,disabled:n,onClick:function(){return e.discard(l)},style:"diamond"===l.suit||"heart"===l.suit?{color:"red"}:{},children:(0,r.jsxs)(y.Z,{column:!0,center:!0,children:[(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(l.suit)," "]}),(0,r.jsxs)("h4",{children:[" ",l.value," "]})]})}),p>850&&(0,r.jsx)("h3",{className:re().discardText,children:" REMOVE "})]}),!l&&(0,r.jsx)("div",{className:re().cardPlaceholder})]}),(0,r.jsxs)("div",{className:re().pile,style:{width:"".concat(m+x,"px")},children:[o>0&&function(t){for(var i=[],s=0;s<t;s++)s===t-1?i.push((0,r.jsxs)("button",{className:re().topPileCard,style:{marginLeft:u?"-5px":"0px",marginTop:1===t?"0px":"".concat(p>850?-100:-70,"px")},onClick:function(){e.drawFromPile(),h(!1)},disabled:void 0!==l||a||n,onMouseEnter:function(){p>850&&h(!0)},onMouseLeave:function(){p>850&&h(!1)},children:[(n||a)&&"",!(n||a)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{children:l?"\ud83d\udeab":"DRAW"}),l?"":t]})]},"pile-card-".concat(s))):i.push((0,r.jsx)("div",{className:re().pileCard,style:{marginLeft:"".concat(0===s?t:t-s,"px"),marginTop:"".concat(0===s?0:p>850?-100:-70,"px")}},"pile-card-".concat(s)));return i}(o),!(o>0||a&&!n)&&(0,r.jsx)("h4",{className:re().pilePlaceholder,children:" Wait for card "})]})]})]})})},ie=n(5807),se=n.n(ie),ce=function(e){var t=e.player,n=t.gameState.pile,a=t.gameState.hand,i=t.gameState.cardDrawn,s=t.gameState.roundWinner,c=t.gameState.spoonCollected,l=e.roundComplete,o=e.maxPileLength,d=e.width,u=d>850?70:50;return(0,r.jsxs)(y.Z,{column:!0,end:!0,children:[(0,r.jsx)(y.Z,{center:!0,noWrap:!0,children:(0,r.jsxs)("div",{className:l&&d<=850?c?se().safeMobile:se().eliminatedMobile:se().flex,children:[(0,r.jsx)(E.Z,{number:t.avatar,size:25}),(0,r.jsxs)("h4",{style:{marginLeft:"5px",marginTop:"5px"},children:[t.nickname,t.gameState.dealer?"\ud83e\udd35\u200d\u2642\ufe0f":"",l&&d>850&&(0,r.jsxs)("span",{className:c?se().safe:se().eliminated,children:[c&&s&&"WINNER",c&&!s&&"SAFE",!c&&"ELIMINATED"]})]})]})}),(0,r.jsx)("div",{style:{height:"5px"}}),(0,r.jsxs)(y.Z,{noWrap:!0,children:[(0,r.jsx)(y.Z,{column:!0,end:!0,children:(0,r.jsx)(y.Z,{children:function(){var e=a;i&&(e=a.concat([i]));var n=d>850?50:35;return e.map((function(a,c){var o=e.length-1-c;return l&&s?4===c?null:(0,r.jsxs)("div",{className:se().winnerCard,style:{color:"diamond"===a.suit||"heart"===a.suit?"red":"",marginLeft:"".concat(0===c?0:-n/2*.8,"px"),marginTop:"0px"},children:[(0,r.jsxs)("h4",{children:[" ",(0,f.pG)(a.suit)," "]}),(0,r.jsxs)("h4",{children:[" ",a.value," "]})]},"player-".concat(t.id,"-card-").concat(o)):4===c&&i?(0,r.jsx)("div",{className:se().card,style:{marginLeft:"-".concat(n,"px"),marginTop:"-15px"}},"player-".concat(t.id,"-card-").concat(o)):(0,r.jsx)("div",{className:se().card,style:{marginLeft:"".concat(0===c?0:-n/2,"px")}},"player-".concat(t.id,"-card-").concat(o))}))}()})}),(0,r.jsxs)("div",{className:se().pile,style:{height:"".concat(u+o,"px")},children:[0===n.length&&(0,r.jsx)("div",{className:se().pilePlaceholder}),n.length>0&&function(){var e=n.length;l&&i&&n.length;for(var a=[],s=0;s<e;s++)s===e-1?a.push((0,r.jsx)("div",{className:se().pileCard,style:{marginBottom:"".concat(s,"px"),boxShadow:"0px -4px 0px rgba(0, 0, 0, 0.1)"},children:!l&&"".concat(e)},"player-".concat(t.id,"-pile-card-").concat(s))):a.push((0,r.jsx)("div",{className:se().pileCard,style:{marginBottom:"".concat(s,"px")}},"player-".concat(t.id,"-pile-card-").concat(s)));return a}()]})]})]})};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t=e.lobby,n=t.gameStatus,a=n.round,i=t.players,c=t.settings,l=e.myPlayer,d=(0,s.useState)(h.CV),p=d[0],m=d[1],x=(0,s.useState)([]),g=x[0],j=x[1],v=(0,s.useState)(0),b=v[0],S=v[1],C=(0,s.useState)(""),w=C[0],P=C[1],Z=(0,s.useState)(!1),O=Z[0],E=Z[1],k=(0,s.useState)(!1),L=k[0],I=k[1],T=(0,s.useState)(!1),M=T[0],A=T[1],W=(0,s.useState)(-1),F=W[0],B=W[1],H=(0,s.useState)(!0),z=H[0],K=H[1],Q=(0,s.useState)(!1),V=Q[0],Y=Q[1],U=(0,s.useState)(-1),J=U[0],ee=U[1],ne=(0,s.useState)("1"),re=ne[0],ie=ne[1];(0,s.useEffect)((function(){if(0!==a)return le(),ee(window.screen.width),window.addEventListener("resize",se),function(){return window.removeEventListener("resize",se)};K(!0)}),[e]);var se=function(){var e=window.screen.height,t=window.screen.width;ie("".concat(850<t&&t<1100?t/1100:1,", ").concat(e<715?e/715:1)),ee(window.screen.width)},le=function(){var e=i.filter((function(e){return e.gameState.remaining})),t=he(e),n=t.filter((function(e){return!e.gameState.spoonCollected})).length-1;if(l.gameState.remaining){var r=ue(l,t);l.gameState.spoonCollected?(l.gameState.roundWinner?P("WINNER"):P("SAFE"),0===n&&E(!0)):0===n&&(me(),P("ELIMINATED"),E(!0)),m(l),j(r)}else{var a,s;V?(a=t.filter((function(e){return e.id===p.id}))[0],s=ue(a,t)):(a=t[Math.floor(Math.random()*t.length)],s=ue(a,t),Y(!0)),a.gameState.spoonCollected?(p.gameState.roundWinner?P("WINNER"):P("SAFE"),0===n&&E(!0)):0===n&&(me(),P("ELIMINATED"),E(!0)),m(a),j(s)}S(n),K(!1)};u()((function(){L&&(c.peek.timer>=F&&F>1?B(F-1):de()),M&&(c.peek.cooldown>=F&&F>1?B(F-1):(B(-1),I(!1),A(!1)))}),M||L?1e3:null);var de=function(){B(c.peek.cooldown),I(!1),A(!0)},ue=function(e,t){var n=t.findIndex((function(t){return t.id===e.id})),r=t.slice(0,n);return t.slice(n+1,t.length).concat(r)},he=function(e){for(var t=e[0],n=[],r=t.id;""!==r;){var a=e.filter((function(e){return e.id===r}))[0];n.push(a),r=r===t.gameState.previousPlayerId?"":a.gameState.nextPlayerId}return n},pe=function(){var e=p.gameState.hand,t=e[0].value;return 4===e.filter((function(e){return e.value===t})).length},me=function(){o.Z.database().ref("".concat(t.id,"/players/").concat(l.id,"/gameState/toBeEliminated")).set(!0)},fe=function(){for(var e=(0,f.Ql)(i,c,a),n=(0,f.N9)(e).filter((function(e){return e.gameState.remaining})).length-1,r=[],s=0;s<n;s++)r.push(!1);o.Z.database().ref(t.id).set({gameStatus:oe(oe({},t.gameStatus),{},{countdownStarted:!0,spoonStatuses:r}),players:e,settings:c})},xe=function(){var e=i.map((function(e){return oe(oe({},e),{},{gameState:h.Qx})})),n=(0,f.jF)(e);o.Z.database().ref(t.id).set(oe(oe({},t),{},{id:null,gameStatus:h.c_,players:n}))};return z?(0,r.jsx)(R.Z,{message:"Organsing your table..."}):(0,r.jsxs)(N.Z,{children:[l.isHost&&(0,r.jsx)("div",{className:D().navbar,children:(0,r.jsxs)(y.Z,{spaceBetween:!0,children:[(0,r.jsx)(_.Z,{disabled:!1,onClick:xe,primary:!0,children:" BACK TO LOBBY "}),O&&n.round<n.numRounds&&(0,r.jsx)(_.Z,{onClick:fe,disabled:!1,primary:!0,children:"Start next round"})]})}),(0,r.jsx)("div",{className:D().container,style:{transform:"scale(".concat(re,")"),transformOrigin:"top"},children:(0,r.jsxs)(y.Z,{column:!0,spaceEvenly:!0,children:[(0,r.jsx)(y.Z,{spaceEvenly:!0,noWrap:!0,children:(0,f.Aj)(g,"top").map((function(e,t){return(0,r.jsxs)(r.Fragment,{children:[t>0&&1!==g.length&&(0,r.jsx)("div",{style:{marginLeft:"10px"}}),(0,r.jsx)(X,{player:e,roundComplete:O,width:J,maxPileLength:(0,f.q$)(g.length+1)},"player-".concat(e.id))]})}))}),(0,r.jsxs)(G,{gridTemplateColumns:g.length>2?"1fr 4fr 1fr":"4fr",gridTemplateRows:"",children:[g.length>2&&(0,r.jsx)($,{player:(0,f.Aj)(g,"left")[0],roundComplete:O,width:J,maxPileLength:(0,f.q$)(g.length+1)}),(0,r.jsx)(q,{peekTimerOn:L,myPlayer:p,spectating:V,roundComplete:O,seconds:F,currentRound:a,numRounds:n.numRounds,currentMyPlayer:l,currentPlayers:i,peekCooldownOn:M,peekingOn:c.peek.on,cancelPeek:de,collectSpoon:function(e){var r=o.Z.database().ref("".concat(t.id,"/players/").concat(p.id,"/gameState")),a=c.clicksToCollect;if(1===a){o.Z.database().ref("".concat(t.id,"/gameStatus/spoonStatuses/").concat(e)).transaction((function(e){var t=0===i.filter((function(e){return e.gameState.roundWinner})).length;if(!e)return t?r.transaction((function(e){if(e)return oe(oe({},e),{},{spoonCollected:!0,roundWinner:!0})})):r.transaction((function(e){if(e)return oe(oe({},e),{},{spoonCollected:!0})})),!0}))}else{var s=n.spoonStatuses,l=s[e],d=(o.Z.database().ref("".concat(t.id,"/gameStatus/spoonStatuses")),o.Z.database().ref("".concat(t.id,"/gameStatus/spoonStatuses/").concat(e)));if("boolean"===typeof l){if(l)return;d.transaction((function(e){return[p.id]})),s.map((function(n,r){if("boolean"!==typeof n&&r!==e){var a=n.filter((function(e){return e!==p.id}));o.Z.database().ref("".concat(t.id,"/gameStatus/spoonStatuses/").concat(r)).transaction((function(e){return 0!==a.length&&a}))}}))}else{var u=0===i.filter((function(e){return e.gameState.roundWinner})).length,h=l.filter((function(e){return e===p.id})).length+1===a;u&&h&&(d.transaction((function(e){return!0})),r.transaction((function(e){if(e)return oe(oe({},e),{},{spoonCollected:!0,roundWinner:!0})}))),0===l.filter((function(e){return e===p.id})).length&&s.map((function(n,r){if(r===e){var a=[];n.forEach((function(e,t){0===a.filter((function(t){return t===e})).length&&a.push(e)})),d.transaction((function(e){return[p.id].concat(a)}))}if("boolean"!==typeof n&&r!==e){var i=n.filter((function(e){return e!==p.id}));o.Z.database().ref("".concat(t.id,"/gameStatus/spoonStatuses/").concat(r)).transaction((function(e){return 0!==i.length&&i}))}return n})),l.filter((function(e){return e===p.id})).length>0&&(h?(r.transaction((function(e){return oe(oe({},e),{},{spoonCollected:!0})})),d.transaction((function(e){return!0}))):d.transaction((function(e){return e.concat([p.id])})))}}},spoonStatuses:n.spoonStatuses,fourOfAKind:pe,peek:function(){I(!0),B(c.peek.timer)},backToLobby:xe,nextRound:fe,width:J,opponents:g,clicksToCollect:c.clicksToCollect}),g.length>2&&(0,r.jsx)(te,{player:(0,f.Aj)(g,"right")[0],roundComplete:O,width:J,maxPileLength:(0,f.q$)(g.length+1)})]}),(0,r.jsxs)(y.Z,{center:!0,spaceEvenly:!0,noWrap:!0,children:[g.length>=8&&(0,r.jsx)(ce,{player:g[0],roundComplete:O,width:J,maxPileLength:(0,f.q$)(g.length+1)}),(0,r.jsx)(ae,{myPlayer:p,spectating:V,roundComplete:O,safeMessage:w,numOfRemainingPlayers:i.filter((function(e){return e.gameState.remaining})).length,spectateNext:function(){var e=i.filter((function(e){return e.gameState.remaining})),t=e.filter((function(e){return e.id===p.gameState.nextPlayerId}))[0],n=ue(t,e);t.gameState.spoonCollected?(t.gameState.roundWinner?P("WINNER"):P("SAFE"),0===b&&E(!0)):0===b&&(P("ELIMINATED"),E(!0)),m(t),j(n)},spectatePrevious:function(){var e=i.filter((function(e){return e.gameState.remaining})),t=e.filter((function(e){return e.id===p.gameState.previousPlayerId}))[0],n=ue(t,e);t.gameState.spoonCollected?(t.gameState.roundWinner?P("WINNER"):P("SAFE"),0===b&&E(!0)):0===b?(P("ELIMINATED"),E(!0)):P(""),m(t),j(n)},discard:function(e){o.Z.database().ref("".concat(t.id,"/players/").concat(p.id,"/gameState")).transaction((function(t){var n=t.hand.map((function(t){return t.value===e.value&&t.suit===e.suit?p.gameState.cardDrawn:t}));return oe(oe({},t),{},{hand:t.hand?n:t.hand,cardDrawn:t.cardDrawn?null:t.cardDrawn})})),o.Z.database().ref("".concat(t.id,"/players/").concat(p.gameState.nextPlayerId,"/gameState")).transaction((function(t){return oe(oe({},t),{},{pile:t.pile?t.pile.concat([e]):[e]})}))},fourOfAKind:pe,drawFromPile:function(){o.Z.database().ref("".concat(t.id,"/players/").concat(l.id,"/gameState/")).transaction((function(e){return oe(oe({},e),{},{cardDrawn:e.cardDrawn?null:e.pile[0],pile:e.pile?e.pile.splice(1,e.pile.length):null})}))},width:J}),9===g.length&&(0,r.jsx)(ce,{player:g[8],roundComplete:O,width:J,maxPileLength:(0,f.q$)(g.length+1)})]})]})})]})};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(){var e=(0,p.sm)(o.Z.database().ref()),t=(0,i.Z)(e,3),n=t[0],d=t[1],m=t[2],x=(0,s.useState)(!0),g=x[0],j=x[1],y=(0,s.useState)(h.CV),_=y[0],v=y[1],b=(0,s.useState)(h.p$),S=b[0],C=b[1],w=(0,s.useState)(-1),P=w[0],Z=w[1],N=(0,s.useState)(!1),O=N[0],E=N[1],k=(0,s.useState)(!1),L=k[0],T=k[1],M=(0,s.useState)(-1),W=M[0],D=M[1],F=(0,s.useState)(!1),B=F[0],G=F[1];(0,s.useEffect)((function(){if(!d)if(m)alert("Internal Server Error!"),K();else{var e=sessionStorage.getItem("lid"),t=sessionStorage.getItem("pid");if(e&&t)if(n)if(1===n.filter((function(t){return t.key===e})).length){var r=n.filter((function(t){return t.key===e}))[0].val(),a=(0,f.N9)(r.players);if(a.filter((function(e){return e.id===t}))[0])if(1===a.filter((function(e){return e.isHost})).length)z(e,t,r);else{var i=a[0].id;o.Z.database().ref("".concat(e,"/players/").concat(i,"/isHost")).set(!0)}else D(1),G(!0)}else D(1),G(!0);else alert("Internal Server Error!"),K();else alert("Internal Server Error!"),K()}}),[n,d,m]),(0,c.x)((function(){var e=JSON.stringify(he(he({},_),{},{isHost:!1}));if(localStorage.setItem("saved-player",e),S.players.length-1===0){var t=JSON.stringify(he(he({},S),{},{players:null}));localStorage.setItem("saved-lobby",t),o.Z.database().ref(S.id).remove()}else H(S.id,_.id)}));u()((function(){if(W>0)D(W-1);else{var e=sessionStorage.getItem("lid"),t=sessionStorage.getItem("pid");if(e&&t){var n=localStorage.getItem("saved-lobby"),r=localStorage.getItem("saved-player");r?n?function(e,t){localStorage.removeItem("saved-lobby"),localStorage.removeItem("saved-player");var n=JSON.parse(t),r=JSON.parse(e);o.Z.database().ref(n.id).set(he(he({},n),{},{id:null,players:(0,a.Z)({},r.id,he({},r))}))}(r,n):function(e,t,n){localStorage.removeItem("saved-player");var r=JSON.parse(n);o.Z.database().ref("".concat(e,"/players/").concat(t)).set(r)}(e,t,r):(alert("The host has removed you from the lobby!"),K())}else alert("Lobby doesnt exist"),K();D(-1),G(!1)}}),B?1e3:null),u()((function(){5>=P&&P>1?Z(P-1):(Z(-1),E(!1),T(!0),o.Z.database().ref("".concat(S.id,"/gameStatus")).set(he(he({},S.gameStatus),{},{round:S.gameStatus.round+1,countdownStarted:!1})))}),O?1e3:null);var H=function(e,t){return o.Z.database().ref("".concat(e,"/players/").concat(t)).remove()},z=function(e,t,n){var r=(0,f.N9)(n.players).map((function(e){return he(he({},e),{},{gameState:0===n.gameStatus.round?h.Qx:e.gameState})})),a={id:e,players:r,gameStatus:n.gameStatus,settings:n.settings},i=r.filter((function(e){return e.id===t}))[0],s=a.gameStatus.countdownStarted;C(a),v(i),Z(s?5:P),E(s),T(a.gameStatus.round>0&&!s),j(!1)},K=function(){l.default.push("/404"),sessionStorage.removeItem("lid"),sessionStorage.removeItem("pid"),localStorage.removeItem("saved-player"),localStorage.removeItem("saved-lobby")};return d||g?(0,r.jsx)(R.Z,{message:"Getting lobby information..."}):g?(0,r.jsx)(R.Z,{message:"..."}):O?(0,r.jsx)(A,{seconds:P}):L?(0,r.jsx)(de,{lobby:S,myPlayer:_}):(0,r.jsx)(I,{lobby:S,myPlayer:_,removePlayer:H,setSeconds:Z})}},2042:function(e,t,n){"use strict";n.d(t,{jF:function(){return c},N9:function(){return l},Ql:function(){return o},pG:function(){return h},q$:function(){return p},Aj:function(){return m}});var r=n(4942),a=n(6640);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t={};return e.forEach((function(e,n){t[e.id]=s(s({},e),{},{id:null})})),t},l=function(e){return Object.keys(e).map((function(t){return s(s({},e[t]),{},{id:t,gameState:s(s({},e[t].gameState),{},{hand:e[t].gameState.hand||[],pile:e[t].gameState.pile||[]})})}))},o=function(e,t,n){var i=(0,a.$$)(),l=e;t.shuffle&&(l=d(l));var o=n>0?l.filter((function(e){return e.gameState.roundWinner}))[0]:a.CV,h=u(l,n),p=h.filter((function(e){return e.gameState.remaining})),m=c(h);if(t.dealer.on&&p.length>2){var f;f=t.dealer.default||0===n?p[Math.floor(Math.random()*p.length)]:p.filter((function(e){return e.id===o.id}))[0];for(var x=0;x<4*p.length&&x!==4*p.length;x++){var g=x%p.length,j=p[g].id,y=m[j],_=y.gameState,v=i[x];m=s(s({},m),{},(0,r.Z)({},j,s(s({},y),{},{gameState:s(s({},_),{},{hand:_.hand.concat([v])})})))}m[f.id].gameState.dealer=!0;for(var b=4*p.length;b<i.length;b++){var S=m[f.id],C=S.gameState,w=i[b];m=s(s({},m),{},(0,r.Z)({},f.id,s(s({},S),{},{gameState:s(s({},C),{},{pile:C.pile.concat([w])})})))}return m}return i.forEach((function(e,t){var n=t%p.length,a=p[n].id,i=m[a],c=i.gameState,l=!0;4===c.hand.length&&(l=!1),m=s(s({},m),{},(0,r.Z)({},a,s(s({},i),{},{gameState:s(s({},c),{},{hand:l?c.hand.concat([e]):c.hand,pile:l?c.pile:c.pile.concat([e])})})))})),m},d=function(e){for(var t=e,n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*n),a=t[n];t[n]=t[r],t[r]=a}return t},u=function(e,t){var n=e.map((function(e,n){return 0===t?s(s({},e),{},{gameState:s(s({},a.Qx),{},{remaining:!0})}):e.gameState.toBeEliminated?s(s({},e),{},{gameState:s(s({},a.Qx),{},{toBeEliminated:!0,remaining:!1})}):e.gameState.remaining?s(s({},e),{},{gameState:s(s({},a.Qx),{},{remaining:!0})}):e})),i=c(n),o=n.filter((function(e){return e.gameState.remaining}));return o.forEach((function(e,t){i=s(s({},i),{},(0,r.Z)({},e.id,s(s({},e),{},{gameState:s(s({},e.gameState),{},{previousPlayerId:o[(t+o.length-1)%o.length].id,nextPlayerId:o[(t+1)%o.length].id})})))})),l(i)},h=function(e){return"club"===e?"\u2663":"diamond"===e?"\u2666":"heart"===e?"\u2665":"spade"===e?"\u2660":""},p=function(e){return 52-4*e},m=function(e,t){var n=e.length;if("top"===t)switch(n){case 3:return[e[1]];case 4:return[e[1],e[2]];case 5:return[e[1],e[2],e[3]];case 6:return[e[1],e[2],e[3],e[4]];case 7:return[e[1],e[2],e[3],e[4],e[5]];case 8:case 9:return[e[2],e[3],e[4],e[5],e[6]];default:return e}if("left"===t)switch(n){case 3:case 4:case 5:case 6:case 7:return[e[0]];case 8:case 9:return[e[1]];default:return[]}if("right"===t)switch(e.length){case 3:return[e[2]];case 4:return[e[3]];case 5:return[e[4]];case 6:return[e[5]];case 7:return[e[6]];case 8:case 9:return[e[7]];default:return[]}return[]}},3219:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lobby",function(){return n(7337)}])},5242:function(e){e.exports={text:"Countdown_text__1XAK4"}},8495:function(e){e.exports={navbar:"Game_navbar__2jeZo",container:"Game_container__17luz",safe:"Game_safe__XCbtj",eliminated:"Game_eliminated__16kbo"}},3770:function(e){e.exports={spoons:"Board_spoons__2gpmq",spoon:"Board_spoon__29kQP",collectIndicator:"Board_collectIndicator__YorDp"}},6889:function(e){e.exports={container:"MyPlayer_container__yUug7",flex:"MyPlayer_flex__38Ki0",card:"MyPlayer_card__21oaz",cardPlaceholder:"MyPlayer_cardPlaceholder__1bhSc",cardDrawn:"MyPlayer_cardDrawn__1cDDf",pile:"MyPlayer_pile__379bM",pileCard:"MyPlayer_pileCard__2_IBq",topPileCard:"MyPlayer_topPileCard__1xv7T",pilePlaceholder:"MyPlayer_pilePlaceholder__3Ulsk",safe:"MyPlayer_safe__392Ke",eliminated:"MyPlayer_eliminated__1MKIo",spectating:"MyPlayer_spectating__KXn4f",discardText:"MyPlayer_discardText__3POUG",safeMobile:"MyPlayer_safeMobile__3IVcL",eliminatedMobile:"MyPlayer_eliminatedMobile__3YIHg"}},5807:function(e){e.exports={flex:"Bottom_flex__2ItTE",pile:"Bottom_pile__IYSO6",pileCard:"Bottom_pileCard__K-uDz",pilePlaceholder:"Bottom_pilePlaceholder__1LQE5",card:"Bottom_card__3b7cj",safe:"Bottom_safe__1BZNC",eliminated:"Bottom_eliminated__2_6M3",winnerCard:"Bottom_winnerCard__1x8PX",cardPlaceholder:"Bottom_cardPlaceholder__2XKV6",topPileCard:"Bottom_topPileCard__13oqC",safeMobile:"Bottom_safeMobile__QzMxa",eliminatedMobile:"Bottom_eliminatedMobile__3qEXv"}},63:function(e){e.exports={flex:"Left_flex__cGmrg",pile:"Left_pile__1TPc1",pileCard:"Left_pileCard__3IS6C",pilePlaceholder:"Left_pilePlaceholder__2riQc",card:"Left_card__3YpHC",safe:"Left_safe__mz3tH",eliminated:"Left_eliminated__4r-Bo",winnerCard:"Left_winnerCard__2RcdY",cardPlaceholder:"Left_cardPlaceholder__uq5Gu",topPileCard:"Left_topPileCard__2o2Ed",safeMobile:"Left_safeMobile__2uAeR",eliminatedMobile:"Left_eliminatedMobile__3NW1i"}},6988:function(e){e.exports={flex:"Right_flex__1XOgk",pile:"Right_pile__3_E2r",pileCard:"Right_pileCard__3bI2U",pilePlaceholder:"Right_pilePlaceholder__4S5SJ",card:"Right_card__3BX6T",safe:"Right_safe__V5_OC",eliminated:"Right_eliminated__hN3Ka",winnerCard:"Right_winnerCard__1amIc",cardPlaceholder:"Right_cardPlaceholder__2trfL",topPileCard:"Right_topPileCard__3eVjI",safeMobile:"Right_safeMobile__3HhpZ",eliminatedMobile:"Right_eliminatedMobile__2x1ID"}},1317:function(e){e.exports={flex:"Top_flex__56J-H",pile:"Top_pile__104zh",pileCard:"Top_pileCard__QOAe5",pilePlaceholder:"Top_pilePlaceholder__18EyW",card:"Top_card__3oMRa",safe:"Top_safe__25lO2",eliminated:"Top_eliminated__jRGAG",winnerCard:"Top_winnerCard__11hpO",cardPlaceholder:"Top_cardPlaceholder__35mWA",topPileCard:"Top_topPileCard__1XpxF",safeMobile:"Top_safeMobile__28HfP",eliminatedMobile:"Top_eliminatedMobile__1GYVu"}},5912:function(e){e.exports={container:"Setup_container__3NLfG",gridItem:"Setup_gridItem__yGTdq",scrollablePlayers:"Setup_scrollablePlayers__3vAx1",scrollableSettings:"Setup_scrollableSettings__ekAY8",myPlayer:"Setup_myPlayer__14R6G",player:"Setup_player__2G3xd",emptyPlayer:"Setup_emptyPlayer__2CtZN",navbar:"Setup_navbar__36tQj",buttonPadding:"Setup_buttonPadding__1DFxx",mobileGridItem:"Setup_mobileGridItem__1pxmk"}},1905:function(e){e.exports={radio:"Radio_radio__23dSa",disabled:"Radio_disabled__2GOa_"}},2226:function(e){e.exports={centered:"Container_centered__3qeoo",normal:"Container_normal__2CnoL"}},7372:function(e){e.exports={grid:"Grid_grid__1-nPj"}}},function(e){e.O(0,[774,724,803,626,465,319,888,179],(function(){return t=3219,e(e.s=t);var t}));var t=e.O();_N_E=t}]);